{
  "id": "task-30",
  "title": "Terminal: sidecar PTY server (WS)",
  "description": "Implement WebSocket PTY server in sidecar spawning non-root shell with resize and idle timeout.",
  "requirements": [
    "WebSocket endpoint serving a PTY-backed shell",
    "Spawn under non-root user with restricted env",
    "Support stdin/stdout, resize, and idle TTL",
    "Resource limits and process cleanup on disconnect"
  ],
  "plan": [
    "Spawn /bin/bash -l under non-root",
    "Wire WS stdin/stdout protocol",
    "Implement resize and TTL"
  ],
  "expected_outcome": "Stable PTY WS endpoint in sidecar.",
  "acceptance_criteria": [
    "Client can open, type, see output, and resize",
    "Session terminates after idle TTL",
    "No orphan processes after disconnect"
  ],
  "deliverables": [
    "apps/sidecar/pty.ts"
  ],
  "test_plan": [
    "E2E test via headless WS client",
    "Leak check for orphaned processes"
  ],
  "references": [
    "PLAN.md",
    "PTY implementation notes"
  ],
  "dependencies": ["task-21"],
  "status": "pending"
}
