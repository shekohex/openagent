{
  "id": "task-29",
  "title": "Permissions tracking + API",
  "description": "Persist pending permissions from events; add GET/POST endpoints for list and respond using Convex functions.",
  "requirements": [
    "Ingest permission.request/resolved events into Convex",
    "Enforce ownership in queries/mutations",
    "GET list supports filters by session/status",
    "POST respond updates record and notifies sidecar"
  ],
  "plan": [
    "Consume permission.request/resolved events",
    "Persist to pending_permissions collection",
    "Expose GET/POST endpoints backed by Convex"
  ],
  "expected_outcome": "Permissions flow recorded and manageable via API.",
  "acceptance_criteria": [
    "Listing returns accurate, filtered results",
    "Respond transitions status and notifies sidecar",
    "Unauthorized access is denied"
  ],
  "deliverables": [
    "apps/orchestrator/routes/permissions.ts",
    "convex/permissions.ts"
  ],
  "test_plan": [
    "API tests: list/respond",
    "Event ingestion writes rows"
  ],
  "references": ["PLAN.md"],
  "dependencies": ["task-3", "task-26", "task-14"],
  "status": "pending"
}
