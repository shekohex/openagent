{
  "id": "task-31",
  "title": "Terminal: orchestrator WS proxy",
  "description": "Authenticate session and proxy WS frames to sidecar PTY endpoint.",
  "requirements": [
    "WS upgrader at /v1/sessions/:id/terminal",
    "Validate per-session WS token and ownership",
    "Proxy frames to sidecar PTY endpoint",
    "Backpressure handling and close semantics"
  ],
  "plan": [
    "Implement WS upgrader at /v1/sessions/:id/terminal",
    "Validate token + session access",
    "Proxy frames bi-directionally"
  ],
  "expected_outcome": "Terminal WS bridge operational via orchestrator.",
  "acceptance_criteria": [
    "Valid token connects; invalid is rejected",
    "Bi-directional frames pass with low latency",
    "Proxy closes when sidecar closes"
  ],
  "deliverables": [
    "apps/orchestrator/routes/terminal.ts"
  ],
  "test_plan": [
    "WS proxy integration with mocked sidecar",
    "Token validation tests"
  ],
  "references": [
    "PLAN.md",
    "Bun WebSocket API"
  ],
  "dependencies": ["task-15", "task-30"],
  "status": "pending"
}
