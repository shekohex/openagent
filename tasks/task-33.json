{
  "id": "task-33",
  "title": "Export: ZIP snapshot",
  "description": "Add orchestrator endpoint to request a ZIP stream of current workspace from sidecar.",
  "requirements": [
    "Sidecar generates ZIP from workspace directory",
    "Orchestrator streams ZIP response with correct headers",
    "Create session_artifacts record with metadata",
    "Large workspaces stream without buffering entire file"
  ],
  "plan": [
    "Sidecar: implement ZIP creation on demand",
    "Orchestrator: stream ZIP to client",
    "Record artifact in session_artifacts"
  ],
  "expected_outcome": "Clients can download ZIP of workspace.",
  "acceptance_criteria": [
    "Download succeeds and unzips correctly",
    "Artifact record created with size and checksum",
    "Memory usage remains bounded during stream"
  ],
  "deliverables": [
    "apps/sidecar/archive.ts",
    "apps/orchestrator/routes/export_zip.ts"
  ],
  "test_plan": [
    "Streamed download integration test",
    "Checksum verification"
  ],
  "references": [
    "PLAN.md"
  ],
  "dependencies": ["task-27", "task-3"],
  "status": "pending"
}
