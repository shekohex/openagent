{
  "id": "task-22",
  "title": "Sidecar: registration client + key decrypt",
  "description": "Implement sidecar boot: generate X25519 keypair, call /internal/register, decrypt sealed keys in memory.",
  "requirements": [
    "Generate ephemeral X25519 keypair on boot",
    "POST to orchestrator /internal/register with regToken and public key",
    "Receive sealed bundle and decrypt into memory only",
    "Do not persist any plaintext keys to disk",
    "Retry with backoff on transient failures"
  ],
  "plan": [
    "Generate ephemeral keypair",
    "POST to orchestrator with regToken",
    "Decrypt sealed bundle; hold in memory only"
  ],
  "expected_outcome": "Sidecar receives and decrypts provider keys securely.",
  "acceptance_criteria": [
    "Successful register stores decrypted keys only in memory",
    "Invalid regToken yields clear error and no retained secrets",
    "Network failures backoff and eventually surface error",
    "Zeroization of buffers after use paths are tested"
  ],
  "deliverables": [
    "apps/sidecar/registration.ts",
    "packages/shared/crypto/x25519.ts"
  ],
  "test_plan": [
    "Unit test decryption with test vectors",
    "Integration test against mocked /internal/register endpoint"
  ],
  "references": [
    "PLAN.md",
    "X25519/ECIES references"
  ],
  "dependencies": ["task-19", "task-21"],
  "status": "pending"
}
